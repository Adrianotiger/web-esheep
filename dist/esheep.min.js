"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var VERSION="0.7.1",ACTIVATE_DEBUG=!1,DEFAULT_XML="http://esheep.petrucci.ch/script/animation.php",COLLISION_WITH=["div","hr"],DesktopPet=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"start_esheep",value:function(){console.error("Deprecated, use new x=eSheep and x.Start() to start new eSheep.")}}]),e}(),eSheep=function(){function eSheep(e){_classCallCheck(this,eSheep),this.animationFile=DEFAULT_XML,this.DOMdiv=document.createElement("div"),this.DOMimg=document.createElement("img"),this.DOMinfo=document.createElement("div"),this.parser=new DOMParser,this.xmlDoc=null,this.isChild=null!=e,this.tilesX=1,this.tilesY=1,this.imageW=1,this.imageH=1,this.imageX=1,this.imageY=1,this.flipped=!1,this.dragging=!1,this.infobox=!1,this.animationId=0,this.animationStep=0,this.animationNode=null,this.sprite=new Image,this.HTMLelement=null,this.randS=100*Math.random(),this.screenW=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.screenH=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}return _createClass(eSheep,[{key:"Start",value:function(e){void 0!==e&&null!=e&&(this.animationFile=e);var t=new XMLHttpRequest,i=this;t.open("GET",this.animationFile,!0),t.addEventListener("readystatechange",function(){4==this.readyState&&(200==this.status?i._parseXML(this.responseText):console.error("XML not available:"+this.statusText+"\n"+this.responseText))}),t.send(null)}},{key:"_parseXML",value:function(e){this.xmlDoc=this.parser.parseFromString(e,"text/xml");var t=this.xmlDoc.getElementsByTagName("image")[0];this.tilesX=t.getElementsByTagName("tilesx")[0].textContent,this.tilesY=t.getElementsByTagName("tilesy")[0].textContent,this.sprite.addEventListener("load",function(e){ACTIVATE_DEBUG&&console.log("Sprite image loaded");var t="width:"+this.sprite.width+"px;height:"+this.sprite.height+"px;position:absolute;top:0px;left:0px;max-width: none;";this.DOMimg.setAttribute("style",t),this.DOMimg.addEventListener("dragstart",function(e){return e.preventDefault(),!1}),this.imageW=this.sprite.width/this.tilesX,this.imageH=this.sprite.height/this.tilesY,t="width:"+this.imageW+"px;height:"+this.imageH+"px;position:fixed;top:"+this.imageY+"px;left:"+this.imageX+"px;transform:rotatey(0deg);cursor:move;z-index:2000;overflow:hidden;",this.DOMdiv.setAttribute("style",t),this.DOMdiv.appendChild(this.DOMimg),this.isChild?this._spawnChild():this._spawnESheep()}.bind(this)),this.sprite.src="data:image/png;base64,"+t.getElementsByTagName("png")[0].textContent,this.DOMimg.setAttribute("src",this.sprite.src),this.DOMdiv.addEventListener("mousemove",function(e){if(!this.dragging&&1==e.buttons&&0==e.button){this.dragging=!0,this.HTMLelement=null;for(var t=this.xmlDoc.getElementsByTagName("animations")[0].getElementsByTagName("animation"),i=0;i<t.length;i++)if("drag"==t[i].getElementsByTagName("name")[0].textContent){this.animationId=t[i].getAttribute("id"),this.animationStep=0,this.animationNode=t[i];break}}}.bind(this)),document.body.addEventListener("mousemove",function(e){this.dragging&&(this.imageX=parseInt(e.clientX)-this.imageW/2,this.imageY=parseInt(e.clientY)-this.imageH/2,this.DOMdiv.style.left=this.imageX+"px",this.DOMdiv.style.top=this.imageY+"px")}.bind(this)),document.body.addEventListener("resize",function(e){this.screenW=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.screenH=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,this.imageY+this.imageH>this.screenH&&(this.imageY=this.screenH-this.imageH,this.DOMdiv.style.top=this.imageY+"px"),this.imageX+this.imageW>this.screenW&&(this.imageX=this.screenW-this.imageW,this.DOMdiv.style.left=this.imageX+"px")}.bind(this)),this.DOMdiv.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this.DOMdiv.addEventListener("mouseup",function(e){this.dragging?this.dragging=!1:this.infobox?(this.DOMinfo.style.display="none",this.infobox=!1):(this.DOMinfo.style.left=Math.min(this.screenW-200,Math.max(0,parseInt(this.imageX+this.imageW/2-parseInt(this.DOMinfo.style.width)/2)))+"px",this.DOMinfo.style.top=parseInt(this.imageY-parseInt(this.DOMinfo.style.height))+"px",this.DOMinfo.style.display="block",this.infobox=!0)}.bind(this)),this.DOMinfo.addEventListener("mouseup",function(e){this.DOMinfo.style.display="none",this.infobox=!1}.bind(this));this.DOMinfo.setAttribute("style","width:200px;height:100px;position:fixed;top:100px;left:10px;display:none;border-width:2px;border-radius:5px;border-style:ridge;border-color:#0000ab;text-align:center;text-shadow: 1px 1px 3px #ffff88;box-shadow: 3px 3px 10px #888888;color:black;opacity:0.9;z-index:9999;overflow:auto;background: linear-gradient(to bottom right, rgba(128,128,255,0.7), rgba(200,200,255,0.4));");var i=document.createElement("b").appendChild(document.createTextNode("eSheep")),n=document.createElement("sup"),a=document.createElement("a");n.appendChild(document.createTextNode("ver: "+VERSION)),n.setAttribute("style","float:right"),a.appendChild(document.createTextNode("http://esheep.petrucci.ch")),a.setAttribute("href","http://esheep.petrucci.ch"),a.setAttribute("target","_blank"),this.DOMinfo.appendChild(i),this.DOMinfo.appendChild(n),this.DOMinfo.appendChild(document.createElement("br")),this.DOMinfo.appendChild(document.createElement("hr")),this.DOMinfo.appendChild(document.createTextNode("Visit the home page of this lovely sheep:")),this.DOMinfo.appendChild(document.createElement("br")),this.DOMinfo.appendChild(a),document.body.appendChild(this.DOMinfo),document.body.appendChild(this.DOMdiv)}},{key:"_setPosition",value:function(e,t,i){i?(this.imageX=parseInt(e),this.imageY=parseInt(t)):(this.imageX=parseInt(this.imageX)+parseInt(e),this.imageY=parseInt(this.imageY)+parseInt(t)),this.DOMdiv.style.left=this.imageX+"px",this.DOMdiv.style.top=this.imageY+"px"}},{key:"_spawnESheep",value:function(){for(var e=this.xmlDoc.getElementsByTagName("spawns")[0].getElementsByTagName("spawn"),t=0,i=0;i<e.length;i++)t+=parseInt(e[0].getAttribute("probability"));var n=Math.random()*t;for(i=t=0;i<e.length;i++)if(n<=(t+=parseInt(e[i].getAttribute("probability")))||i==e.length-1){this._setPosition(this._parseKeyWords(e[i].getElementsByTagName("x")[0].textContent),this._parseKeyWords(e[i].getElementsByTagName("y")[0].textContent),!0),ACTIVATE_DEBUG&&console.log("Spawn: "+this.imageX+", "+this.imageY),this.animationId=e[i].getElementsByTagName("next")[0].textContent,this.animationStep=0;for(var a=this.xmlDoc.getElementsByTagName("animations")[0].getElementsByTagName("animation"),s=0;s<a.length;s++)if(a[s].getAttribute("id")==this.animationId){this.animationNode=a[s];a=this.xmlDoc.getElementsByTagName("childs")[0].getElementsByTagName("child");for(var h=0;h<a.length;h++)if(a[h].getAttribute("animationid")==this.animationId){ACTIVATE_DEBUG&&console.log("Child from Spawn");var o=new eSheep(!0);o.animationId=a[h].getElementsByTagName("next")[0].textContent;var m=a[h].getElementsByTagName("x")[0].textContent,r=a[h].getElementsByTagName("y")[0].textContent;o._setPosition(this._parseKeyWords(m),this._parseKeyWords(r),!0),o.Start(this.animationFile);break}break}break}this._nextESheepStep()}},{key:"_spawnChild",value:function(){for(var e=this.xmlDoc.getElementsByTagName("animations")[0].getElementsByTagName("animation"),t=0;t<e.length;t++)if(e[t].getAttribute("id")==this.animationId){this.animationNode=e[t];break}this._nextESheepStep()}},{key:"_parseKeyWords",value:function _parseKeyWords(value){value=value.replace(/screenW/g,this.screenW),value=value.replace(/screenH/g,this.screenH),value=value.replace(/areaW/g,this.screenH),value=value.replace(/areaH/g,this.screenH),value=value.replace(/imageW/g,this.imageW),value=value.replace(/imageH/g,this.imageH),value=value.replace(/random/g,100*Math.random()),value=value.replace(/randS/g,this.randS),value=value.replace(/imageX/g,this.imageX),value=value.replace(/imageY/g,this.imageY);var ret=0;try{ret=eval(value)}catch(e){console.error("Unable to parse this position: \n'"+value+"'\n Error message: \n"+e.message)}return ret}},{key:"_getNextRandomNode",value:function(e){var t=e.getElementsByTagName("next"),i=this.xmlDoc.getElementsByTagName("animations")[0].getElementsByTagName("animation"),n=0,a=!1;if(0==t.length)return this.isChild?(ACTIVATE_DEBUG&&console.log("Remove child"),document.body.removeChild(this.DOMinfo),document.body.removeChild(this.DOMdiv)):this._spawnESheep(),!1;for(var s=0;s<t.length;s++)n+=parseInt(t[s].getAttribute("probability"));var h=Math.random()*n,o=0;for(s=n=0;s<t.length;s++)if(h<=(n+=parseInt(t[s].getAttribute("probability")))){o=s;break}for(s=0;s<i.length;s++)if(i[s].getAttribute("id")==t[o].textContent){this.animationId=i[s].getAttribute("id"),this.animationStep=0,this.animationNode=i[s],a=!0;break}if(a){i=this.xmlDoc.getElementsByTagName("childs")[0].getElementsByTagName("child");for(s=0;s<i.length;s++)if(i[s].getAttribute("animationid")==this.animationId){ACTIVATE_DEBUG&&console.log("Child from Animation");var m=new eSheep(!0);m.animationId=i[s].getElementsByTagName("next")[0].textContent;var r=i[s].getElementsByTagName("x")[0].textContent,l=i[s].getElementsByTagName("y")[0].textContent;m._setPosition(this._parseKeyWords(r),this._parseKeyWords(l),!0),m.Start(this.animationFile);break}}return a}},{key:"_checkOverlapping",value:function(){var e,t=this.imageX,i=this.imageY+this.imageH,n=20;for(var a in this.HTMLelement&&(n=5),COLLISION_WITH)for(var s=document.body.getElementsByTagName(COLLISION_WITH[a]),h=0;h<s.length;h++)if(i>(e=s[h].getBoundingClientRect()).top-2&&i<e.top+n&&t>e.left&&t<e.right-this.imageW){var o=window.getComputedStyle(s[h]);if(""!=o.borderTopStyle&&"none"!=o.borderTopStyle&&"none"!=o.display)return s[h]}return!1}},{key:"_getNodeValue",value:function(e,t,i){if(this.animationNode&&this.animationNode.getElementsByTagName(e)){if(this.animationNode.getElementsByTagName(e)[0].getElementsByTagName(t)[0]){var n=this.animationNode.getElementsByTagName(e)[0].getElementsByTagName(t)[0].textContent;return this._parseKeyWords(n)}return i}}},{key:"_nextESheepStep",value:function(){var e,t=this._getNodeValue("start","x",0),i=this._getNodeValue("start","y",0),n=(this._getNodeValue("start","offsety",0),this._getNodeValue("start","opacity",1),this._getNodeValue("start","interval",1e3)),a=this._getNodeValue("end","x",0),s=this._getNodeValue("end","y",0),h=(this._getNodeValue("end","offsety",0),this._getNodeValue("end","interval",1),this._getNodeValue("end","interval",1e3)),o=this._parseKeyWords(this.animationNode.getElementsByTagName("sequence")[0].getAttribute("repeat")),m=this.animationNode.getElementsByTagName("sequence")[0].getAttribute("repeatfrom"),r=this.animationNode.getElementsByTagName("gravity"),l=this.animationNode.getElementsByTagName("border"),g=this.animationNode.getElementsByTagName("frame").length+(this.animationNode.getElementsByTagName("frame").length-m)*o;if(e=this.animationStep<this.animationNode.getElementsByTagName("frame").length?this.animationNode.getElementsByTagName("frame")[this.animationStep].textContent:0==m?this.animationNode.getElementsByTagName("frame")[this.animationStep%this.animationNode.getElementsByTagName("frame").length].textContent:this.animationNode.getElementsByTagName("frame")[parseInt(m)+parseInt((this.animationStep-m)%(this.animationNode.getElementsByTagName("frame").length-m))].textContent,this.DOMimg.style.left=-this.imageW*(e%this.tilesX)+"px",this.DOMimg.style.top=-this.imageH*parseInt(e/this.tilesX)+"px",this.dragging||this.infobox)return this.animationStep++,void window.setTimeout(function(){this._nextESheepStep()}.bind(this),50);if(this.flipped&&(t=-t,a=-a),0==this.animationStep?this._setPosition(t,i,!1):this._setPosition(parseInt(t)+parseInt((a-t)*this.animationStep/g),parseInt(i)+parseInt((s-i)*this.animationStep/g),!1),this.animationStep++,this.animationStep>=g){if(this.animationNode.getElementsByTagName("action")[0])switch(this.animationNode.getElementsByTagName("action")[0].textContent){case"flip":"rotateY(0deg)"==this.DOMdiv.style.transform?(this.DOMdiv.style.transform="rotateY(180deg)",this.flipped=!0):(this.DOMdiv.style.transform="rotateY(0deg)",this.flipped=!1)}if(!this._getNextRandomNode(this.animationNode.getElementsByTagName("sequence")[0]))return}var d=!1;return l&&l[0]&&l[0].getElementsByTagName("next")&&(a<0&&this.imageX<0?d=!(this.imageX=0):0<a&&this.imageX>this.screenW-this.imageW?(this.imageX=this.screenW-this.imageW,this.DOMdiv.style.left=parseInt(this.imageX)+"px",d=!0):s<0&&this.imageY<0?d=!(this.imageY=0):0<s&&this.imageY>this.screenH-this.imageH?(this.imageY=this.screenH-this.imageH,d=!0):0<s?this._checkOverlapping()&&this.imageY>this.imageH&&(this.HTMLelement=this._checkOverlapping(),this.imageY=Math.ceil(this.HTMLelement.getBoundingClientRect().top)-this.imageH,d=!0):this.HTMLelement&&(this._checkOverlapping()||(this.imageY+this.imageH>this.HTMLelement.getBoundingClientRect().top+3||this.imageY+this.imageH<this.HTMLelement.getBoundingClientRect().top-3?this.HTMLelement=null:(this.imageX<this.HTMLelement.getBoundingClientRect().left?this.imageX=parseInt(this.imageX+3):this.imageX=parseInt(this.imageX-3),d=!0),this.DOMdiv.style.left=parseInt(this.imageX)+"px")),d&&!this._getNextRandomNode(l[0]))||!d&&r&&r[0]&&r[0].getElementsByTagName("next")&&this.imageY<this.screenH-this.imageH-2&&(null==this.HTMLelement?d=!0:this._checkOverlapping()||(d=!0,this.HTMLelement=null),d&&!this._getNextRandomNode(r[0]))?void 0:!d&&(this.imageX<-this.imageW&&a<0||this.imageX>this.screenW&&0<a||this.imageY<-this.imageH&&i<0||this.imageY>this.screenH&&0<s)?(d=!0,void(this.isChild||this._spawnESheep())):void window.setTimeout(function(){this._nextESheepStep()}.bind(this),parseInt(n)+parseInt((h-n)*this.animationStep/g))}}]),eSheep}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVzaGVlcC5taW4uanMiXSwibmFtZXMiOlsiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJUeXBlRXJyb3IiLCJWRVJTSU9OIiwiQUNUSVZBVEVfREVCVUciLCJERUZBVUxUX1hNTCIsIkNPTExJU0lPTl9XSVRIIiwiRGVza3RvcFBldCIsInRoaXMiLCJ2YWx1ZSIsImNvbnNvbGUiLCJlcnJvciIsImVTaGVlcCIsImlzQ2hpbGQiLCJhbmltYXRpb25GaWxlIiwiRE9NZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiRE9NaW1nIiwiRE9NaW5mbyIsInBhcnNlciIsIkRPTVBhcnNlciIsInhtbERvYyIsInRpbGVzWCIsInRpbGVzWSIsImltYWdlVyIsImltYWdlSCIsImltYWdlWCIsImltYWdlWSIsImZsaXBwZWQiLCJkcmFnZ2luZyIsImluZm9ib3giLCJhbmltYXRpb25JZCIsImFuaW1hdGlvblN0ZXAiLCJhbmltYXRpb25Ob2RlIiwic3ByaXRlIiwiSW1hZ2UiLCJIVE1MZWxlbWVudCIsInJhbmRTIiwiTWF0aCIsInJhbmRvbSIsInNjcmVlblciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJib2R5Iiwic2NyZWVuSCIsImlubmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiYW5pbWF0aW9uIiwiYWpheCIsIlhNTEh0dHBSZXF1ZXN0Iiwic2hlZXBDbGFzcyIsIm9wZW4iLCJhZGRFdmVudExpc3RlbmVyIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIl9wYXJzZVhNTCIsInJlc3BvbnNlVGV4dCIsInN0YXR1c1RleHQiLCJzZW5kIiwidGV4dCIsInBhcnNlRnJvbVN0cmluZyIsImltYWdlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0ZXh0Q29udGVudCIsImUiLCJsb2ciLCJhdHRyaWJ1dGUiLCJ3aWR0aCIsImhlaWdodCIsInNldEF0dHJpYnV0ZSIsInByZXZlbnREZWZhdWx0IiwiYXBwZW5kQ2hpbGQiLCJfc3Bhd25DaGlsZCIsIl9zcGF3bkVTaGVlcCIsImJpbmQiLCJzcmMiLCJidXR0b25zIiwiYnV0dG9uIiwiY2hpbGRzIiwiayIsImdldEF0dHJpYnV0ZSIsInBhcnNlSW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJzdHlsZSIsImxlZnQiLCJ0b3AiLCJkaXNwbGF5IiwibWluIiwibWF4IiwiaHRtbFQiLCJjcmVhdGVUZXh0Tm9kZSIsImh0bWxWIiwiaHRtbEwiLCJ4IiwieSIsImFic29sdXRlIiwic3Bhd25zIiwicHJvYiIsInJhbmQiLCJfc2V0UG9zaXRpb24iLCJfcGFyc2VLZXlXb3JkcyIsImoiLCJlU2hlZXBDaGlsZCIsIlN0YXJ0IiwiX25leHRFU2hlZXBTdGVwIiwicmVwbGFjZSIsInJldCIsImV2YWwiLCJlcnIiLCJtZXNzYWdlIiwicGFyZW50Tm9kZSIsImJhc2VOb2RlIiwibm9kZUZvdW5kIiwicmVtb3ZlQ2hpbGQiLCJpbmRleCIsInJlY3QiLCJtYXJnaW4iLCJlbHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyaWdodCIsImdldENvbXB1dGVkU3R5bGUiLCJib3JkZXJUb3BTdHlsZSIsIm5vZGVOYW1lIiwidmFsdWVOYW1lIiwiZGVmYXVsdFZhbHVlIiwieDEiLCJfZ2V0Tm9kZVZhbHVlIiwieTEiLCJkZWwxIiwieDIiLCJ5MiIsImRlbDIiLCJyZXBlYXQiLCJyZXBlYXRmcm9tIiwiZ3Jhdml0eSIsImJvcmRlciIsInN0ZXBzIiwic2V0VGltZW91dCIsInRyYW5zZm9ybSIsIl9nZXROZXh0UmFuZG9tTm9k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S0FBS29HLG1CQUNML0IsS0FBS3JFLE1BQU80RSxTQUFTZ0QsR0FBUWhELFVBQVVtRCxFQUFPSCxHQUFRNUgsS0FBS3lCLGNBQWdCMkcsUUFJMUVoSSxPQXpqQkkiLCJmaWxlIjoiZXNoZWVwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKlxyXG4gKiBQcm9qZWN0OlxyXG4gKiAgICAgICAgICAgICAgICBlU2hlZXAgLSBXZWJwYWdlXHJcbiAqXHJcbiAqIERhdGU6XHJcbiAqICAgICAgICAgICAgICAgIDA0LmFwcmlsIDIwMThcclxuICpcclxuICogQXV0aG9yOlxyXG4gKiAgICAgICAgICAgICAgICBBZHJpYW5vIFBldHJ1Y2NpIChodHRwOi8vZXNoZWVwLnBldHJ1Y2NpLmNoKVxyXG4gKlxyXG4gKiBWZXJzaW9uOiAgICAgICAwLjcuMVxyXG4gKlxyXG4gKiBJbnRyb2R1Y3Rpb246XHJcbiAqICAgICAgICAgICAgICAgIEFzIFwid3JhcHBlclwiIGZvciB0aGUgT3BlblNvdXJjZSBDIyBwcm9qZWN0XHJcbiAqICAgICAgICAgICAgICAgIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0Fkcmlhbm90aWdlci9kZXNrdG9wUGV0KSxcclxuICogICAgICAgICAgICAgICAgdGhpcyBqYXZhc2NyaXB0IFwiY2xhc3NcIiB3YXMgd3JpdHRlbiB0byBnZXQgdGhlIGFuaW1hdGlvbnMgYWxzbyBpbnNpZGUgeW91clxyXG4gKiAgICAgICAgICAgICAgICB3ZWJwYWdlLiBJdCBkb2Vzbid0IHdvcmsgbGlrZSB0aGUgV2luZG93cyB2ZXJzaW9uLCBidXQgc2hvdyBtdWNoIGFuaW1hdGlvbnMgZnJvbSBpdC5cclxuICpcclxuICogRGVzY3JpcHRpb246XHJcbiAqICAgICAgICAgICAgICAgIEFkZCBhIHdhbGtpbmcgcGV0IChzaGVlcCB0byB5b3VyIGhvbWUgcGFnZSkgd2l0aCBqdXN0IGEgZmV3IGxpbmVzIG9mIGNvZGUhXHJcbiAqICAgICAgICAgICAgICAgIFdpbGwgYWRkIGEgbG92ZWx5IHNoZWVwIChzdHJheSBzaGVlcCkgYW5kIHRoaXMgd2lsbCB3YWxrIGFyb3VuZCB5b3VyIHBhZ2UgYW5kIG92ZXJcclxuICogICAgICAgICAgICAgICAgYWxsIDxocj5zIGFuZCA8ZGl2PnMgd2l0aCBhIGJvcmRlci4gWW91IGNhbiBhbHNvIHNlbGVjdCBhbm90aGVyIGFuaW1hdGlvbiwgdXNpbmcgeW91clxyXG4gKiAgICAgICAgICAgICAgICBwZXJzb25hbCBYTUwgZmlsZSBvciBvbmUgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAqXHJcbiAqIEhvdyB0byB1c2U6XHJcbiAqICAgICAgICAgICAgICAgIEFkZCB0aGlzIGxpbmUgaW4geW91ciA8aGVhZGVyPjpcclxuICogICAgICAgICAgICAgICAgPHNjcmlwdCBzcmM9XCJodHRwOi8vZXNoZWVwLnBldHJ1Y2NpLmNoL3NjcmlwdC9EZXNrdG9wUGV0LmpzXCI+PC9zY3JpcHQ+XHJcbiAqICAgICAgICAgICAgICAgIEFkZCB0aGlzIGxpbmVzIGluIHlvdXIgPGJvZHk+IChhdCB0aGUgZW5kIGlmIHBvc3NpYmxlKTpcclxuICogICAgICAgICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGV0ID0gbmV3IEVTaGVlcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBldC5TdGFydCgnaHR0cDovL2VzaGVlcC5wZXRydWNjaS5jaC9zY3JpcHQvYW5pbWF0aW9uLnhtbCcpO1xyXG4gICAgICAgICAgICAgICAgICA8L3NjcmlwdD5cclxuICogICAgICAgICAgICAgICAgVGhhdCdzIGFsbCFcclxuICpcclxuICogUmVxdWlyZW1lbnQ6XHJcbiAqICAgICAgICAgICAgICAgIFRlc3RlZCBvbiBJRTExLCBFZGdlIGFuZCBPcGVyYVxyXG4gKlxyXG4gKiBDaGFuZ2Vsb2c6XHJcbiAqICAgICAgICAgICAgICAgIFZlcnNpb24gMC43LjEgLSAwNC4wNC4yMDE4OlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gQWRkIG1heC13aWR0aDogbm9uZSB0byBlbnN1cmUgdGhlIGltYWdlIGlzIHByb3Blcmx5IHNob3duXHJcbiAqICAgICAgICAgICAgICAgIFZlcnNpb24gMC43IC0gMTMuMTEuMjAxNzpcclxuICogICAgICAgICAgICAgICAgICAtIGJldHRlciBKYXZhc2NyaXB0IHN0cnVjdHVyZVxyXG4gKiAgICAgICAgICAgICAgICAgIC0gR2l0SHViIHZlcnNpb24gKGh0dHBzOi8vZ2l0aHViLmNvbS9BZHJpYW5vdGlnZXIvd2ViLWVzaGVlcClcclxuICogICAgICAgICAgICAgICAgICAtIENoaWxkcyBhbmltYXRpb25zIGFkZGVkXHJcbiAqICAgICAgICAgICAgICAgICAgLSBCZXR0ZXIgY29tbWVudHNcclxuICogICAgICAgICAgICAgICAgICAtIFJlcGxhY2VkIGFsZXJ0cyB3aXRoIGNvbnNvbGUuZXJyb3JcclxuICogICAgICAgICAgICAgICAgVmVyc2lvbiAwLjUgLSAxMi4wNy4yMDE3OlxyXG4gKiAgICAgICAgICAgICAgICAgIC0gYW5pbWF0aW9ucyBzdGFydHMgb25seSBvbmNlIHRoZSBpbWFnZSB3YXMgbG9hZGVkICh0aGFua3MgUmVkU3BhcnIwdylcclxuICogICAgICAgICAgICAgICAgVmVyc2lvbiAwLng6XHJcbiAqICAgICAgICAgICAgICAgICAgLSBzdGlsbCBiZXRhIHZlcnNpb25zLi4uXHJcbiAqL1xuXG52YXIgVkVSU0lPTiA9ICcwLjcuMSc7IC8vIHdlYiBlU2hlZXAgdmVyc2lvblxudmFyIEFDVElWQVRFX0RFQlVHID0gZmFsc2U7IC8vIHNob3cgbG9nIG9uIGNvbnNvbGVcbnZhciBERUZBVUxUX1hNTCA9IFwiaHR0cDovL2VzaGVlcC5wZXRydWNjaS5jaC9zY3JpcHQvYW5pbWF0aW9uLnBocFwiOyAvLyBkZWZhdWx0IFhNTCBhbmltYXRpb25cbnZhciBDT0xMSVNJT05fV0lUSCA9IFtcImRpdlwiLCBcImhyXCJdOyAvLyBlbGVtZW50cyBvbiBwYWdlIHRvIGRldGVjdCBmb3IgY29sbGlzaW9uc1xuXG4vKlxyXG4gKiBPbGQgc3R5bGUsIGRvbid0IHVzZSBpdC5cclxuICovXG5cbnZhciBEZXNrdG9wUGV0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEZXNrdG9wUGV0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZXNrdG9wUGV0KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEZXNrdG9wUGV0LCBbe1xuICAgIGtleTogXCJzdGFydF9lc2hlZXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRfZXNoZWVwKCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkRlcHJlY2F0ZWQsIHVzZSBuZXcgeD1lU2hlZXAgYW5kIHguU3RhcnQoKSB0byBzdGFydCBuZXcgZVNoZWVwLlwiKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGVza3RvcFBldDtcbn0oKTtcblxuLypcclxuICogZVNoZWVwIGNsYXNzLlxyXG4gKiBDcmVhdGUgYSBuZXcgY2xhc3Mgb2YgdGhpcyB0eXBlIGlmIHlvdSB3YW50IGEgbmV3IHBldC4gV2lsbCBjcmVhdGUgdGhlIGNvbXBvbmVudHMgZm9yIHRoZSBwZXQuXHJcbiAqIE9uY2UgY3JlYXRlZCwgeW91IGNhbiBjYWxsIFt2YXJpYWJsZU5hbWVdLlN0YXJ0KCkgdG8gc3RhcnQgdGhlIGFuaW1hdGlvbiB3aXRoIHlvdXIgZGVzaXJlZCBwZXQuXHJcbiAqL1xuXG5cbnZhciBlU2hlZXAgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGVTaGVlcChpc0NoaWxkKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGVTaGVlcCk7XG5cbiAgICAvLyBDT1JTOiBDcm9zcyBjYWxscyBhcmUgbm90IGFjY2VwdGVkIGJ5IG5ldyBicm93c2Vycy5cbiAgICAvLyBUaGlzIFBIUC1zY3JpcHQgYWxsb3dzIHRvIGNhbGwgdGhlIHBhZ2UgYWxzbyBmcm9tIG90aGVyIGRvbWFpbnNcbiAgICB0aGlzLmFuaW1hdGlvbkZpbGUgPSBERUZBVUxUX1hNTDtcblxuICAgIHRoaXMuRE9NZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTsgLy8gRGl2IGFkZGVkIHRvIHdlYnBhZ2UsIGNvbnRhaW5pbmcgdGhlIHNoZWVwXG4gICAgdGhpcy5ET01pbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpOyAvLyBUaWxlIGltYWdlLCB3aWxsIGJlIHBvc2l0aW9uZWQgaW5zaWRlIHRoZSBkaXZcbiAgICB0aGlzLkRPTWluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpOyAvLyBhYm91dCBkaWFsb2csIGlmIHlvdSBwcmVzcyBvbiB0aGUgc2hlZXBcblxuICAgIHRoaXMucGFyc2VyID0gbmV3IERPTVBhcnNlcigpOyAvLyBYTUwgcGFyc2VyXG4gICAgdGhpcy54bWxEb2MgPSBudWxsOyAvLyBwYXJzZWQgWE1MIERvY3VtZW50XG5cbiAgICB0aGlzLmlzQ2hpbGQgPSBpc0NoaWxkICE9IG51bGw7IC8vIENoaWxkIHdpbGwgYmUgcmVtb3ZlZCBvbmNlIHRoZXkgcmVhY2hlZCB0aGUgZW5kXG5cbiAgICB0aGlzLnRpbGVzWCA9IDE7IC8vIFF1YW50aXR5IG9mIGltYWdlcyBpbnNpZGUgVGlsZVxuICAgIHRoaXMudGlsZXNZID0gMTsgLy8gUXVhbnRpdHkgb2YgaW1hZ2VzIGluc2lkZSBUaWxlXG4gICAgdGhpcy5pbWFnZVcgPSAxOyAvLyBXaWR0aCBvZiB0aGUgc3ByaXRlIGltYWdlXG4gICAgdGhpcy5pbWFnZUggPSAxOyAvLyBIZWlnaHQgb2YgdGhlIHNwcml0ZSBpbWFnZVxuICAgIHRoaXMuaW1hZ2VYID0gMTsgLy8gUG9zaXRpb24gb2Ygc3ByaXRlIGluc2lkZSB3ZWJwYWdlXG4gICAgdGhpcy5pbWFnZVkgPSAxOyAvLyBQb3NpdGlvbiBvZiBzcHJpdGUgaW5zaWRlIHdlYnBhZ2VcbiAgICB0aGlzLmZsaXBwZWQgPSBmYWxzZTsgLy8gaWYgc3ByaXRlIGlzIGZsaXBwZWRcbiAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7IC8vIGlmIHVzZXIgaXMgZHJhZ2dpbmcgdGhlIHNoZWVwXG4gICAgdGhpcy5pbmZvYm94ID0gZmFsc2U7IC8vIGlmIGluZm9ib3ggaXMgdmlzaWJsZVxuICAgIHRoaXMuYW5pbWF0aW9uSWQgPSAwOyAvLyBjdXJyZW50IGFuaW1hdGlvbiBJRFxuICAgIHRoaXMuYW5pbWF0aW9uU3RlcCA9IDA7IC8vIGN1cnJlbnQgYW5pbWF0aW9uIHN0ZXBcbiAgICB0aGlzLmFuaW1hdGlvbk5vZGUgPSBudWxsOyAvLyBjdXJyZW50IGFuaW1hdGlvbiBET00gbm9kZVxuICAgIHRoaXMuc3ByaXRlID0gbmV3IEltYWdlKCk7IC8vIHNwcml0ZSBpbWFnZSAoVGlsZXMpXG4gICAgdGhpcy5IVE1MZWxlbWVudCA9IG51bGw7IC8vIHRoZSBIVE1MIGVsZW1lbnQgd2hlcmUgdGhlIHBldCBpcyB3YWxraW5nIG9uXG4gICAgdGhpcy5yYW5kUyA9IE1hdGgucmFuZG9tKCkgKiAxMDA7IC8vIHJhbmRvbSB2YWx1ZSwgd2lsbCBjaGFuZ2Ugd2hlbiBwYWdlIGlzIHJlbG9hZGVkXG5cbiAgICB0aGlzLnNjcmVlblcgPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsgLy8gd2luZG93IHdpZHRoXG5cbiAgICB0aGlzLnNjcmVlbkggPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsgLy8gd2luZG93IGhlaWdodFxuICB9XG5cbiAgLypcclxuICAgKiBTdGFydCBuZXcgYW5pbWF0aW9uIG9uIHRoZSBwYWdlLlxyXG4gICAqIGlmIGFuaW1hdGlvbiBpcyBub3Qgc2V0LCB0aGUgZGVmYXVsdCBzaGVlcCB3aWxsIGJlIHRha2VuXHJcbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoZVNoZWVwLCBbe1xuICAgIGtleTogXCJTdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTdGFydChhbmltYXRpb24pIHtcbiAgICAgIGlmICh0eXBlb2YgYW5pbWF0aW9uICE9PSAndW5kZWZpbmVkJyAmJiBhbmltYXRpb24gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkZpbGUgPSBhbmltYXRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBhamF4ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB2YXIgc2hlZXBDbGFzcyA9IHRoaXM7XG5cbiAgICAgIGFqYXgub3BlbihcIkdFVFwiLCB0aGlzLmFuaW1hdGlvbkZpbGUsIHRydWUpO1xuICAgICAgYWpheC5hZGRFdmVudExpc3RlbmVyKFwicmVhZHlzdGF0ZWNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApXG4gICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgbG9hZGVkIFhNTCwgcGFyc2UgaXQgYW5kIGNyZWF0ZSBmaXJzdCBlc2hlZXAuXG4gICAgICAgICAgICBzaGVlcENsYXNzLl9wYXJzZVhNTCh0aGlzLnJlc3BvbnNlVGV4dCk7ZWxzZSBjb25zb2xlLmVycm9yKFwiWE1MIG5vdCBhdmFpbGFibGU6XCIgKyB0aGlzLnN0YXR1c1RleHQgKyBcIlxcblwiICsgdGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGFqYXguc2VuZChudWxsKTtcbiAgICB9XG5cbiAgICAvKlxyXG4gICAgICogUGFyc2UgbG9hZGVkIFhNTCwgY29udGFpbnMgc3Bhd24sIGFuaW1hdGlvbnMgYW5kIGNoaWxkc1xyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJfcGFyc2VYTUxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlWE1MKHRleHQpIHtcbiAgICAgIHRoaXMueG1sRG9jID0gdGhpcy5wYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRleHQsICd0ZXh0L3htbCcpO1xuICAgICAgdmFyIGltYWdlID0gdGhpcy54bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltYWdlJylbMF07XG4gICAgICB0aGlzLnRpbGVzWCA9IGltYWdlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGlsZXN4XCIpWzBdLnRleHRDb250ZW50O1xuICAgICAgdGhpcy50aWxlc1kgPSBpbWFnZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRpbGVzeVwiKVswXS50ZXh0Q29udGVudDtcbiAgICAgIC8vIEV2ZW50IGxpc3RlbmVyOiBTcHJpdGUgd2FzIGxvYWRlZCA9PlxuICAgICAgLy8gICBwbGF5IGFuaW1hdGlvbiBvbmx5IHdoZW4gdGhlIHNwcml0ZSBpcyBsb2FkZWRcbiAgICAgIHRoaXMuc3ByaXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChBQ1RJVkFURV9ERUJVRykgY29uc29sZS5sb2coXCJTcHJpdGUgaW1hZ2UgbG9hZGVkXCIpO1xuICAgICAgICB2YXIgYXR0cmlidXRlID0gXCJ3aWR0aDpcIiArIHRoaXMuc3ByaXRlLndpZHRoICsgXCJweDtcIiArIFwiaGVpZ2h0OlwiICsgdGhpcy5zcHJpdGUuaGVpZ2h0ICsgXCJweDtcIiArIFwicG9zaXRpb246YWJzb2x1dGU7XCIgKyBcInRvcDowcHg7XCIgKyBcImxlZnQ6MHB4O1wiICsgXCJtYXgtd2lkdGg6IG5vbmU7XCI7XG4gICAgICAgIHRoaXMuRE9NaW1nLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGF0dHJpYnV0ZSk7XG4gICAgICAgIC8vIHByZXZlbnQgdG8gbW92ZSBpbWFnZSAod2lsbCBzaG93IHRoZSBlbnRpcmUgc3ByaXRlIHNoZWV0IGlmIG5vdCBjYXRjaGVkKVxuICAgICAgICB0aGlzLkRPTWltZy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW1hZ2VXID0gdGhpcy5zcHJpdGUud2lkdGggLyB0aGlzLnRpbGVzWDtcbiAgICAgICAgdGhpcy5pbWFnZUggPSB0aGlzLnNwcml0ZS5oZWlnaHQgLyB0aGlzLnRpbGVzWTtcbiAgICAgICAgLy9pZih0eXBlb2YgdGhpcy5pbWFnZVggPT0gJ3VuZGVmaW5lZCcpIHRoaXMuaW1hZ2VYID0gMDtcbiAgICAgICAgLy9pZih0eXBlb2YgdGhpcy5pbWFnZVkgPT0gJ3VuZGVmaW5lZCcpIHRoaXMuaW1hZ2VZID0gdGhpcy5zY3JlZW5IIC0gdGhpcy5zcHJpdGUuaGVpZ2h0IC8gdGhpcy50aWxlc1k7XG4gICAgICAgIGF0dHJpYnV0ZSA9IFwid2lkdGg6XCIgKyB0aGlzLmltYWdlVyArIFwicHg7XCIgKyBcImhlaWdodDpcIiArIHRoaXMuaW1hZ2VIICsgXCJweDtcIiArIFwicG9zaXRpb246Zml4ZWQ7XCIgKyBcInRvcDpcIiArIHRoaXMuaW1hZ2VZICsgXCJweDtcIiArIFwibGVmdDpcIiArIHRoaXMuaW1hZ2VYICsgXCJweDtcIiArIFwidHJhbnNmb3JtOnJvdGF0ZXkoMGRlZyk7XCIgKyBcImN1cnNvcjptb3ZlO1wiICsgXCJ6LWluZGV4OjIwMDA7XCIgKyBcIm92ZXJmbG93OmhpZGRlbjtcIjtcbiAgICAgICAgdGhpcy5ET01kaXYuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYXR0cmlidXRlKTtcbiAgICAgICAgdGhpcy5ET01kaXYuYXBwZW5kQ2hpbGQodGhpcy5ET01pbWcpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQ2hpbGQpIHRoaXMuX3NwYXduQ2hpbGQoKTtlbHNlIHRoaXMuX3NwYXduRVNoZWVwKCk7XG4gICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICB0aGlzLnNwcml0ZS5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBpbWFnZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBuZ1wiKVswXS50ZXh0Q29udGVudDtcbiAgICAgIHRoaXMuRE9NaW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLnNwcml0ZS5zcmMpO1xuXG4gICAgICAvLyBNb3VzZSBtb3ZlIG92ZXIgZVNoZWVwLCBjaGVjayBpZiBlU2hlZXAgc2hvdWxkIGJlIG1vdmVkIG92ZXIgdGhlIHNjcmVlblxuICAgICAgdGhpcy5ET01kaXYuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoIXRoaXMuZHJhZ2dpbmcgJiYgZS5idXR0b25zID09IDEgJiYgZS5idXR0b24gPT0gMCkge1xuICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuSFRNTGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgIHZhciBjaGlsZHNSb290ID0gdGhpcy54bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2FuaW1hdGlvbnMnKVswXTtcbiAgICAgICAgICB2YXIgY2hpbGRzID0gY2hpbGRzUm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYW5pbWF0aW9uJyk7XG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjaGlsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGlmIChjaGlsZHNba10uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ25hbWUnKVswXS50ZXh0Q29udGVudCA9PSBcImRyYWdcIikge1xuICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbklkID0gY2hpbGRzW2tdLmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvblN0ZXAgPSAwO1xuICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk5vZGUgPSBjaGlsZHNba107XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciB0byBib2R5LCBpZiBtb3VzZSBtb3ZlZCB0b28gZmFzdCBvdmVyIHRoZSBkcmFnZ2luZyBlU2hlZXBcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xuICAgICAgICAgIHRoaXMuaW1hZ2VYID0gcGFyc2VJbnQoZS5jbGllbnRYKSAtIHRoaXMuaW1hZ2VXIC8gMjtcbiAgICAgICAgICB0aGlzLmltYWdlWSA9IHBhcnNlSW50KGUuY2xpZW50WSkgLSB0aGlzLmltYWdlSCAvIDI7XG5cbiAgICAgICAgICB0aGlzLkRPTWRpdi5zdHlsZS5sZWZ0ID0gdGhpcy5pbWFnZVggKyBcInB4XCI7XG4gICAgICAgICAgdGhpcy5ET01kaXYuc3R5bGUudG9wID0gdGhpcy5pbWFnZVkgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAvLyBXaW5kb3cgcmVzaXplZCwgcmVjYWxjdWxhdGUgZVNoZWVwIGJvdW5kc1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMuc2NyZWVuVyA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xuXG4gICAgICAgIHRoaXMuc2NyZWVuSCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIGlmICh0aGlzLmltYWdlWSArIHRoaXMuaW1hZ2VIID4gdGhpcy5zY3JlZW5IKSB7XG4gICAgICAgICAgdGhpcy5pbWFnZVkgPSB0aGlzLnNjcmVlbkggLSB0aGlzLmltYWdlSDtcbiAgICAgICAgICB0aGlzLkRPTWRpdi5zdHlsZS50b3AgPSB0aGlzLmltYWdlWSArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbWFnZVggKyB0aGlzLmltYWdlVyA+IHRoaXMuc2NyZWVuVykge1xuICAgICAgICAgIHRoaXMuaW1hZ2VYID0gdGhpcy5zY3JlZW5XIC0gdGhpcy5pbWFnZVc7XG4gICAgICAgICAgdGhpcy5ET01kaXYuc3R5bGUubGVmdCA9IHRoaXMuaW1hZ2VYICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgLy8gRG9uJ3QgYWxsb3cgY29udGV4dG1lbnUgb3ZlciB0aGUgc2hlZXBcbiAgICAgIHRoaXMuRE9NZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgLy8gTW91c2UgcmVsZWFzZWRcbiAgICAgIHRoaXMuRE9NZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XG4gICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5mb2JveCkge1xuICAgICAgICAgIHRoaXMuRE9NaW5mby5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgdGhpcy5pbmZvYm94ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5ET01pbmZvLnN0eWxlLmxlZnQgPSBNYXRoLm1pbih0aGlzLnNjcmVlblcgLSAyMDAsIE1hdGgubWF4KDAsIHBhcnNlSW50KHRoaXMuaW1hZ2VYICsgdGhpcy5pbWFnZVcgLyAyIC0gcGFyc2VJbnQodGhpcy5ET01pbmZvLnN0eWxlLndpZHRoKSAvIDIpKSkgKyBcInB4XCI7XG4gICAgICAgICAgdGhpcy5ET01pbmZvLnN0eWxlLnRvcCA9IHBhcnNlSW50KHRoaXMuaW1hZ2VZIC0gcGFyc2VJbnQodGhpcy5ET01pbmZvLnN0eWxlLmhlaWdodCkpICsgXCJweFwiO1xuICAgICAgICAgIHRoaXMuRE9NaW5mby5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIHRoaXMuaW5mb2JveCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAvLyBNb3VzZSByZWxlYXNlZCBvdmVyIHRoZSBpbmZvIGJveFxuICAgICAgdGhpcy5ET01pbmZvLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMuRE9NaW5mby5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIHRoaXMuaW5mb2JveCA9IGZhbHNlO1xuICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgIC8vIENyZWF0ZSBBYm91dCBib3hcbiAgICAgIHZhciBhdHRyaWJ1dGUgPSBcIndpZHRoOjIwMHB4O1wiICsgXCJoZWlnaHQ6MTAwcHg7XCIgKyBcInBvc2l0aW9uOmZpeGVkO1wiICsgXCJ0b3A6MTAwcHg7bGVmdDoxMHB4O1wiICsgXCJkaXNwbGF5Om5vbmU7XCIgKyBcImJvcmRlci13aWR0aDoycHg7XCIgKyBcImJvcmRlci1yYWRpdXM6NXB4O1wiICsgXCJib3JkZXItc3R5bGU6cmlkZ2U7XCIgKyBcImJvcmRlci1jb2xvcjojMDAwMGFiO1wiICsgXCJ0ZXh0LWFsaWduOmNlbnRlcjtcIiArIFwidGV4dC1zaGFkb3c6IDFweCAxcHggM3B4ICNmZmZmODg7XCIgKyBcImJveC1zaGFkb3c6IDNweCAzcHggMTBweCAjODg4ODg4O1wiICsgXCJjb2xvcjpibGFjaztcIiArIFwib3BhY2l0eTowLjk7XCIgKyBcInotaW5kZXg6OTk5OTtcIiArIFwib3ZlcmZsb3c6YXV0bztcIiArIFwiYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSByaWdodCwgcmdiYSgxMjgsMTI4LDI1NSwwLjcpLCByZ2JhKDIwMCwyMDAsMjU1LDAuNCkpO1wiO1xuICAgICAgdGhpcy5ET01pbmZvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGF0dHJpYnV0ZSk7XG4gICAgICB2YXIgaHRtbFQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYlwiKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcImVTaGVlcFwiKSk7XG4gICAgICB2YXIgaHRtbFYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3VwXCIpO1xuICAgICAgdmFyIGh0bWxMID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICBodG1sVi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInZlcjogXCIgKyBWRVJTSU9OKSk7XG4gICAgICBodG1sVi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImZsb2F0OnJpZ2h0XCIpO1xuICAgICAgaHRtbEwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJodHRwOi8vZXNoZWVwLnBldHJ1Y2NpLmNoXCIpKTtcbiAgICAgIGh0bWxMLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCJodHRwOi8vZXNoZWVwLnBldHJ1Y2NpLmNoXCIpO1xuICAgICAgaHRtbEwuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuICAgICAgdGhpcy5ET01pbmZvLmFwcGVuZENoaWxkKGh0bWxUKTtcbiAgICAgIHRoaXMuRE9NaW5mby5hcHBlbmRDaGlsZChodG1sVik7XG4gICAgICB0aGlzLkRPTWluZm8uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICAgIHRoaXMuRE9NaW5mby5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIikpO1xuICAgICAgdGhpcy5ET01pbmZvLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiVmlzaXQgdGhlIGhvbWUgcGFnZSBvZiB0aGlzIGxvdmVseSBzaGVlcDpcIikpO1xuICAgICAgdGhpcy5ET01pbmZvLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgICB0aGlzLkRPTWluZm8uYXBwZW5kQ2hpbGQoaHRtbEwpO1xuICAgICAgLy8gQWRkIGFib3V0IGFuZCBzaGVlcCBlbGVtZW50cyB0byB0aGUgYm9keVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLkRPTWluZm8pO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLkRPTWRpdik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9zZXRQb3NpdGlvblwiLFxuXG5cbiAgICAvKlxyXG4gICAgICogU2V0IG5ldyBwb3NpdGlvbiBmb3IgdGhlIHBldFxyXG4gICAgICogSWYgYWJzb2x1dGUgaXMgdHJ1ZSwgdGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgYXJlIHVzZWQgYXMgYWJzb2x1dGUgdmFsdWVzLlxyXG4gICAgICogSWYgZmFsc2UsIHggYW5kIHkgYXJlIGFkZGVkIHRvIHRoZSBjdXJyZW50IHBvc2l0aW9uXHJcbiAgICAgKi9cbiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFBvc2l0aW9uKHgsIHksIGFic29sdXRlKSB7XG4gICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgdGhpcy5pbWFnZVggPSBwYXJzZUludCh4KTtcbiAgICAgICAgdGhpcy5pbWFnZVkgPSBwYXJzZUludCh5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW1hZ2VYID0gcGFyc2VJbnQodGhpcy5pbWFnZVgpICsgcGFyc2VJbnQoeCk7XG4gICAgICAgIHRoaXMuaW1hZ2VZID0gcGFyc2VJbnQodGhpcy5pbWFnZVkpICsgcGFyc2VJbnQoeSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuRE9NZGl2LnN0eWxlLmxlZnQgPSB0aGlzLmltYWdlWCArIFwicHhcIjtcbiAgICAgIHRoaXMuRE9NZGl2LnN0eWxlLnRvcCA9IHRoaXMuaW1hZ2VZICsgXCJweFwiO1xuICAgIH1cblxuICAgIC8qXHJcbiAgICAgKiBTcGF3biBuZXcgZXNoZWVwLCB0aGlzIGlzIGNhbGxlZCBpZiB0aGUgWE1MIHdhcyBsb2FkZWQgc3VjY2Vzc2Z1bGx5XHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIl9zcGF3bkVTaGVlcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfc3Bhd25FU2hlZXAoKSB7XG4gICAgICB2YXIgc3Bhd25zUm9vdCA9IHRoaXMueG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGF3bnMnKVswXTtcbiAgICAgIHZhciBzcGF3bnMgPSBzcGF3bnNSb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGF3bicpO1xuICAgICAgdmFyIHByb2IgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGF3bnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHJvYiArPSBwYXJzZUludChzcGF3bnNbMF0uZ2V0QXR0cmlidXRlKFwicHJvYmFiaWxpdHlcIikpO1xuICAgICAgfXZhciByYW5kID0gTWF0aC5yYW5kb20oKSAqIHByb2I7XG4gICAgICBwcm9iID0gMDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzcGF3bnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHJvYiArPSBwYXJzZUludChzcGF3bnNbaV0uZ2V0QXR0cmlidXRlKFwicHJvYmFiaWxpdHlcIikpO1xuICAgICAgICBpZiAocHJvYiA+PSByYW5kIHx8IGkgPT0gc3Bhd25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB0aGlzLl9zZXRQb3NpdGlvbih0aGlzLl9wYXJzZUtleVdvcmRzKHNwYXduc1tpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneCcpWzBdLnRleHRDb250ZW50KSwgdGhpcy5fcGFyc2VLZXlXb3JkcyhzcGF3bnNbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3knKVswXS50ZXh0Q29udGVudCksIHRydWUpO1xuICAgICAgICAgIGlmIChBQ1RJVkFURV9ERUJVRykgY29uc29sZS5sb2coXCJTcGF3bjogXCIgKyB0aGlzLmltYWdlWCArIFwiLCBcIiArIHRoaXMuaW1hZ2VZKTtcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvbklkID0gc3Bhd25zW2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCduZXh0JylbMF0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgdGhpcy5hbmltYXRpb25TdGVwID0gMDtcbiAgICAgICAgICB2YXIgY2hpbGRzUm9vdCA9IHRoaXMueG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhbmltYXRpb25zJylbMF07XG4gICAgICAgICAgdmFyIGNoaWxkcyA9IGNoaWxkc1Jvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2FuaW1hdGlvbicpO1xuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2hpbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRzW2tdLmdldEF0dHJpYnV0ZShcImlkXCIpID09IHRoaXMuYW5pbWF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25Ob2RlID0gY2hpbGRzW2tdO1xuXG4gICAgICAgICAgICAgIC8vIENoZWNrIGlmIGNoaWxkIHNob3VsZCBiZSBsb2FkZWQgdG9naGV0aGVyIHdpdGggdGhpcyBhbmltYXRpb25cbiAgICAgICAgICAgICAgdmFyIGNoaWxkc1Jvb3QgPSB0aGlzLnhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2hpbGRzJylbMF07XG4gICAgICAgICAgICAgIHZhciBjaGlsZHMgPSBjaGlsZHNSb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjaGlsZCcpO1xuICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoaWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZHNbal0uZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uaWRcIikgPT0gdGhpcy5hbmltYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgaWYgKEFDVElWQVRFX0RFQlVHKSBjb25zb2xlLmxvZyhcIkNoaWxkIGZyb20gU3Bhd25cIik7XG4gICAgICAgICAgICAgICAgICB2YXIgZVNoZWVwQ2hpbGQgPSBuZXcgZVNoZWVwKHRydWUpO1xuICAgICAgICAgICAgICAgICAgZVNoZWVwQ2hpbGQuYW5pbWF0aW9uSWQgPSBjaGlsZHNbal0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ25leHQnKVswXS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgIHZhciB4ID0gY2hpbGRzW2pdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd4JylbMF0udGV4dENvbnRlbnQ7IC8vXG4gICAgICAgICAgICAgICAgICB2YXIgeSA9IGNoaWxkc1tqXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneScpWzBdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgZVNoZWVwQ2hpbGQuX3NldFBvc2l0aW9uKHRoaXMuX3BhcnNlS2V5V29yZHMoeCksIHRoaXMuX3BhcnNlS2V5V29yZHMoeSksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICBlU2hlZXBDaGlsZC5TdGFydCh0aGlzLmFuaW1hdGlvbkZpbGUpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gUGxheSBuZXh0IHN0ZXBcbiAgICAgIHRoaXMuX25leHRFU2hlZXBTdGVwKCk7XG4gICAgfVxuXG4gICAgLypcclxuICAgICAqIExpa2Ugc3Bhd25FU2hlZXAsIGJ1dCBmb3IgQ2hpbGRzXHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIl9zcGF3bkNoaWxkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9zcGF3bkNoaWxkKCkge1xuICAgICAgdmFyIGNoaWxkc1Jvb3QgPSB0aGlzLnhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYW5pbWF0aW9ucycpWzBdO1xuICAgICAgdmFyIGNoaWxkcyA9IGNoaWxkc1Jvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2FuaW1hdGlvbicpO1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjaGlsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgaWYgKGNoaWxkc1trXS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PSB0aGlzLmFuaW1hdGlvbklkKSB7XG4gICAgICAgICAgdGhpcy5hbmltYXRpb25Ob2RlID0gY2hpbGRzW2tdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9uZXh0RVNoZWVwU3RlcCgpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIHRoZSBodW1hbiByZWFkYWJsZSBleHByZXNzaW9uIGZyb20gWE1MIHRvIGEgY29tcHV0ZXIgcmVhZGFibGUgZXhwcmVzc2lvblxuXG4gIH0sIHtcbiAgICBrZXk6IFwiX3BhcnNlS2V5V29yZHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlS2V5V29yZHModmFsdWUpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvc2NyZWVuVy9nLCB0aGlzLnNjcmVlblcpO1xuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9zY3JlZW5IL2csIHRoaXMuc2NyZWVuSCk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL2FyZWFXL2csIHRoaXMuc2NyZWVuSCk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL2FyZWFIL2csIHRoaXMuc2NyZWVuSCk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL2ltYWdlVy9nLCB0aGlzLmltYWdlVyk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL2ltYWdlSC9nLCB0aGlzLmltYWdlSCk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL3JhbmRvbS9nLCBNYXRoLnJhbmRvbSgpICogMTAwKTtcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvcmFuZFMvZywgdGhpcy5yYW5kUyk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL2ltYWdlWC9nLCB0aGlzLmltYWdlWCk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL2ltYWdlWS9nLCB0aGlzLmltYWdlWSk7XG5cbiAgICAgIHZhciByZXQgPSAwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0ID0gZXZhbCh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBwYXJzZSB0aGlzIHBvc2l0aW9uOiBcXG4nXCIgKyB2YWx1ZSArIFwiJ1xcbiBFcnJvciBtZXNzYWdlOiBcXG5cIiArIGVyci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLypcclxuICAgICAqIE9uY2UgdGhlIGFuaW1hdGlvbiBpcyBvdmVyLCBnZXQgdGhlIG5leHQgYW5pbWF0aW9uIHRvIHBsYXlcclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiX2dldE5leHRSYW5kb21Ob2RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXROZXh0UmFuZG9tTm9kZShwYXJlbnROb2RlKSB7XG4gICAgICB2YXIgYmFzZU5vZGUgPSBwYXJlbnROb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCduZXh0Jyk7XG4gICAgICB2YXIgY2hpbGRzUm9vdCA9IHRoaXMueG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhbmltYXRpb25zJylbMF07XG4gICAgICB2YXIgY2hpbGRzID0gY2hpbGRzUm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYW5pbWF0aW9uJyk7XG4gICAgICB2YXIgcHJvYiA9IDA7XG4gICAgICB2YXIgbm9kZUZvdW5kID0gZmFsc2U7XG5cbiAgICAgIC8vIG5vIG1vcmUgYW5pbWF0aW9ucyAoaXQgd2FzIHRoZSBsYXN0IG9uZSlcbiAgICAgIGlmIChiYXNlTm9kZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAvLyBJZiBpdCBpcyBhIGNoaWxkLCByZW1vdmUgdGhlIGNoaWxkIGZyb20gZG9jdW1lbnRcbiAgICAgICAgaWYgKHRoaXMuaXNDaGlsZCkge1xuICAgICAgICAgIC8vIHJlbW92ZSBjaGlsZFxuICAgICAgICAgIGlmIChBQ1RJVkFURV9ERUJVRykgY29uc29sZS5sb2coXCJSZW1vdmUgY2hpbGRcIik7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLkRPTWluZm8pO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5ET01kaXYpO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVsc2UsIHNwYXduIHNoZWVwIGFnYWluXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc3Bhd25FU2hlZXAoKTtcbiAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBiYXNlTm9kZS5sZW5ndGg7IGsrKykge1xuICAgICAgICBwcm9iICs9IHBhcnNlSW50KGJhc2VOb2RlW2tdLmdldEF0dHJpYnV0ZShcInByb2JhYmlsaXR5XCIpKTtcbiAgICAgIH1cbiAgICAgIHZhciByYW5kID0gTWF0aC5yYW5kb20oKSAqIHByb2I7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgcHJvYiA9IDA7XG4gICAgICBmb3IgKGsgPSAwOyBrIDwgYmFzZU5vZGUubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgcHJvYiArPSBwYXJzZUludChiYXNlTm9kZVtrXS5nZXRBdHRyaWJ1dGUoXCJwcm9iYWJpbGl0eVwiKSk7XG4gICAgICAgIGlmIChwcm9iID49IHJhbmQpIHtcbiAgICAgICAgICBpbmRleCA9IGs7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoayA9IDA7IGsgPCBjaGlsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgaWYgKGNoaWxkc1trXS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PSBiYXNlTm9kZVtpbmRleF0udGV4dENvbnRlbnQpIHtcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvbklkID0gY2hpbGRzW2tdLmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICAgIHRoaXMuYW5pbWF0aW9uU3RlcCA9IDA7XG4gICAgICAgICAgdGhpcy5hbmltYXRpb25Ob2RlID0gY2hpbGRzW2tdO1xuICAgICAgICAgIG5vZGVGb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGVGb3VuZCkgLy8gY3JlYXRlIENoaWxkLCBpZiBwcmVzZW50XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgY2hpbGRzUm9vdCA9IHRoaXMueG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjaGlsZHMnKVswXTtcbiAgICAgICAgICB2YXIgY2hpbGRzID0gY2hpbGRzUm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2hpbGQnKTtcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgY2hpbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRzW2tdLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbmlkXCIpID09IHRoaXMuYW5pbWF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgaWYgKEFDVElWQVRFX0RFQlVHKSBjb25zb2xlLmxvZyhcIkNoaWxkIGZyb20gQW5pbWF0aW9uXCIpO1xuICAgICAgICAgICAgICB2YXIgZVNoZWVwQ2hpbGQgPSBuZXcgZVNoZWVwKHRydWUpO1xuICAgICAgICAgICAgICBlU2hlZXBDaGlsZC5hbmltYXRpb25JZCA9IGNoaWxkc1trXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbmV4dCcpWzBdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICB2YXIgeCA9IGNoaWxkc1trXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneCcpWzBdLnRleHRDb250ZW50OyAvL1xuICAgICAgICAgICAgICB2YXIgeSA9IGNoaWxkc1trXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgneScpWzBdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgICBlU2hlZXBDaGlsZC5fc2V0UG9zaXRpb24odGhpcy5fcGFyc2VLZXlXb3Jkcyh4KSwgdGhpcy5fcGFyc2VLZXlXb3Jkcyh5KSwgdHJ1ZSk7XG4gICAgICAgICAgICAgIGVTaGVlcENoaWxkLlN0YXJ0KHRoaXMuYW5pbWF0aW9uRmlsZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICByZXR1cm4gbm9kZUZvdW5kO1xuICAgIH1cblxuICAgIC8qXHJcbiAgICAgKiBDaGVjayBpZiBzaGVlcCBpcyB3YWxraW5nIG92ZXIgYSBkZWZpbmVkIEhUTUwgVEFHLWVsZW1lbnRcclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiX2NoZWNrT3ZlcmxhcHBpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoZWNrT3ZlcmxhcHBpbmcoKSB7XG4gICAgICB2YXIgeCA9IHRoaXMuaW1hZ2VYO1xuICAgICAgdmFyIHkgPSB0aGlzLmltYWdlWSArIHRoaXMuaW1hZ2VIO1xuICAgICAgdmFyIHJlY3Q7XG4gICAgICB2YXIgbWFyZ2luID0gMjA7XG4gICAgICBpZiAodGhpcy5IVE1MZWxlbWVudCkgbWFyZ2luID0gNTtcbiAgICAgIGZvciAodmFyIGluZGV4IGluIENPTExJU0lPTl9XSVRIKSB7XG4gICAgICAgIHZhciBlbHMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKENPTExJU0lPTl9XSVRIW2luZGV4XSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICByZWN0ID0gZWxzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgaWYgKHkgPiByZWN0LnRvcCAtIDIgJiYgeSA8IHJlY3QudG9wICsgbWFyZ2luKSB7XG4gICAgICAgICAgICBpZiAoeCA+IHJlY3QubGVmdCAmJiB4IDwgcmVjdC5yaWdodCAtIHRoaXMuaW1hZ2VXKSB7XG4gICAgICAgICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsc1tpXSk7XG4gICAgICAgICAgICAgIGlmIChzdHlsZS5ib3JkZXJUb3BTdHlsZSAhPSBcIlwiICYmIHN0eWxlLmJvcmRlclRvcFN0eWxlICE9IFwibm9uZVwiICYmIHN0eWxlLmRpc3BsYXkgIT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxzW2ldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLypcclxuICAgICAqIFRyeSB0byBnZXQgdGhlIHZhbHVlIG9mIGEgbm9kZSAoZnJvbSB0aGUgY3VycmVudCBhbmltYXRpb25Ob2RlKSwgaWYgaXQgaXMgbm90IHBvc3NpYmxlIHJldHVybnMgdGhlIGRlZmF1bHRWYWx1ZVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJfZ2V0Tm9kZVZhbHVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXROb2RlVmFsdWUobm9kZU5hbWUsIHZhbHVlTmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuYW5pbWF0aW9uTm9kZSB8fCAhdGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKG5vZGVOYW1lKSkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uTm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShub2RlTmFtZSlbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUodmFsdWVOYW1lKVswXSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmFuaW1hdGlvbk5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUobm9kZU5hbWUpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKHZhbHVlTmFtZSlbMF0udGV4dENvbnRlbnQ7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlS2V5V29yZHModmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxyXG4gICAgICogTmV4dCBzdGVwIChlYWNoIGZyYW1lIGlzIGEgc3RlcClcclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiX25leHRFU2hlZXBTdGVwXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9uZXh0RVNoZWVwU3RlcCgpIHtcbiAgICAgIHZhciB4MSA9IHRoaXMuX2dldE5vZGVWYWx1ZSgnc3RhcnQnLCAneCcsIDApO1xuICAgICAgdmFyIHkxID0gdGhpcy5fZ2V0Tm9kZVZhbHVlKCdzdGFydCcsICd5JywgMCk7XG4gICAgICB2YXIgb2ZmMSA9IHRoaXMuX2dldE5vZGVWYWx1ZSgnc3RhcnQnLCAnb2Zmc2V0eScsIDApO1xuICAgICAgdmFyIG9wYTEgPSB0aGlzLl9nZXROb2RlVmFsdWUoJ3N0YXJ0JywgJ29wYWNpdHknLCAxKTtcbiAgICAgIHZhciBkZWwxID0gdGhpcy5fZ2V0Tm9kZVZhbHVlKCdzdGFydCcsICdpbnRlcnZhbCcsIDEwMDApO1xuICAgICAgdmFyIHgyID0gdGhpcy5fZ2V0Tm9kZVZhbHVlKCdlbmQnLCAneCcsIDApO1xuICAgICAgdmFyIHkyID0gdGhpcy5fZ2V0Tm9kZVZhbHVlKCdlbmQnLCAneScsIDApO1xuICAgICAgdmFyIG9mZjIgPSB0aGlzLl9nZXROb2RlVmFsdWUoJ2VuZCcsICdvZmZzZXR5JywgMCk7XG4gICAgICB2YXIgb3BhMiA9IHRoaXMuX2dldE5vZGVWYWx1ZSgnZW5kJywgJ2ludGVydmFsJywgMSk7XG4gICAgICB2YXIgZGVsMiA9IHRoaXMuX2dldE5vZGVWYWx1ZSgnZW5kJywgJ2ludGVydmFsJywgMTAwMCk7XG5cbiAgICAgIHZhciByZXBlYXQgPSB0aGlzLl9wYXJzZUtleVdvcmRzKHRoaXMuYW5pbWF0aW9uTm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2VxdWVuY2UnKVswXS5nZXRBdHRyaWJ1dGUoJ3JlcGVhdCcpKTtcbiAgICAgIHZhciByZXBlYXRmcm9tID0gdGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzZXF1ZW5jZScpWzBdLmdldEF0dHJpYnV0ZSgncmVwZWF0ZnJvbScpO1xuICAgICAgdmFyIGdyYXZpdHkgPSB0aGlzLmFuaW1hdGlvbk5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2dyYXZpdHknKTtcbiAgICAgIHZhciBib3JkZXIgPSB0aGlzLmFuaW1hdGlvbk5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvcmRlcicpO1xuXG4gICAgICB2YXIgc3RlcHMgPSB0aGlzLmFuaW1hdGlvbk5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ZyYW1lJykubGVuZ3RoICsgKHRoaXMuYW5pbWF0aW9uTm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZnJhbWUnKS5sZW5ndGggLSByZXBlYXRmcm9tKSAqIHJlcGVhdDtcblxuICAgICAgdmFyIGluZGV4O1xuXG4gICAgICBpZiAodGhpcy5hbmltYXRpb25TdGVwIDwgdGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmcmFtZScpLmxlbmd0aCkgaW5kZXggPSB0aGlzLmFuaW1hdGlvbk5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ZyYW1lJylbdGhpcy5hbmltYXRpb25TdGVwXS50ZXh0Q29udGVudDtlbHNlIGlmIChyZXBlYXRmcm9tID09IDApIGluZGV4ID0gdGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmcmFtZScpW3RoaXMuYW5pbWF0aW9uU3RlcCAlIHRoaXMuYW5pbWF0aW9uTm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZnJhbWUnKS5sZW5ndGhdLnRleHRDb250ZW50O2Vsc2UgaW5kZXggPSB0aGlzLmFuaW1hdGlvbk5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ZyYW1lJylbcGFyc2VJbnQocmVwZWF0ZnJvbSkgKyBwYXJzZUludCgodGhpcy5hbmltYXRpb25TdGVwIC0gcmVwZWF0ZnJvbSkgJSAodGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmcmFtZScpLmxlbmd0aCAtIHJlcGVhdGZyb20pKV0udGV4dENvbnRlbnQ7XG5cbiAgICAgIHRoaXMuRE9NaW1nLnN0eWxlLmxlZnQgPSAtdGhpcy5pbWFnZVcgKiAoaW5kZXggJSB0aGlzLnRpbGVzWCkgKyBcInB4XCI7XG4gICAgICB0aGlzLkRPTWltZy5zdHlsZS50b3AgPSAtdGhpcy5pbWFnZUggKiBwYXJzZUludChpbmRleCAvIHRoaXMudGlsZXNYKSArIFwicHhcIjtcblxuICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgfHwgdGhpcy5pbmZvYm94KSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uU3RlcCsrO1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5fbmV4dEVTaGVlcFN0ZXAoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpLCA1MCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZmxpcHBlZCkge1xuICAgICAgICB4MSA9IC14MTtcbiAgICAgICAgeDIgPSAteDI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmFuaW1hdGlvblN0ZXAgPT0gMCkgdGhpcy5fc2V0UG9zaXRpb24oeDEsIHkxLCBmYWxzZSk7ZWxzZSB0aGlzLl9zZXRQb3NpdGlvbihwYXJzZUludCh4MSkgKyBwYXJzZUludCgoeDIgLSB4MSkgKiB0aGlzLmFuaW1hdGlvblN0ZXAgLyBzdGVwcyksIHBhcnNlSW50KHkxKSArIHBhcnNlSW50KCh5MiAtIHkxKSAqIHRoaXMuYW5pbWF0aW9uU3RlcCAvIHN0ZXBzKSwgZmFsc2UpO1xuXG4gICAgICB0aGlzLmFuaW1hdGlvblN0ZXArKztcblxuICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uU3RlcCA+PSBzdGVwcykge1xuICAgICAgICBpZiAodGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhY3Rpb24nKVswXSkge1xuICAgICAgICAgIHN3aXRjaCAodGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhY3Rpb24nKVswXS50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgY2FzZSBcImZsaXBcIjpcbiAgICAgICAgICAgICAgaWYgKHRoaXMuRE9NZGl2LnN0eWxlLnRyYW5zZm9ybSA9PSBcInJvdGF0ZVkoMGRlZylcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuRE9NZGl2LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlWSgxODBkZWcpXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5mbGlwcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLkRPTWRpdi5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZVkoMGRlZylcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmZsaXBwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fZ2V0TmV4dFJhbmRvbU5vZGUodGhpcy5hbmltYXRpb25Ob2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzZXF1ZW5jZScpWzBdKSkgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2V0TmV4dCA9IGZhbHNlO1xuXG4gICAgICBpZiAoYm9yZGVyICYmIGJvcmRlclswXSAmJiBib3JkZXJbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ25leHQnKSkge1xuICAgICAgICBpZiAoeDIgPCAwICYmIHRoaXMuaW1hZ2VYIDwgMCkge1xuICAgICAgICAgIHRoaXMuaW1hZ2VYID0gMDtcbiAgICAgICAgICBzZXROZXh0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh4MiA+IDAgJiYgdGhpcy5pbWFnZVggPiB0aGlzLnNjcmVlblcgLSB0aGlzLmltYWdlVykge1xuICAgICAgICAgIHRoaXMuaW1hZ2VYID0gdGhpcy5zY3JlZW5XIC0gdGhpcy5pbWFnZVc7XG4gICAgICAgICAgdGhpcy5ET01kaXYuc3R5bGUubGVmdCA9IHBhcnNlSW50KHRoaXMuaW1hZ2VYKSArIFwicHhcIjtcbiAgICAgICAgICBzZXROZXh0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh5MiA8IDAgJiYgdGhpcy5pbWFnZVkgPCAwKSB7XG4gICAgICAgICAgdGhpcy5pbWFnZVkgPSAwO1xuICAgICAgICAgIHNldE5leHQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHkyID4gMCAmJiB0aGlzLmltYWdlWSA+IHRoaXMuc2NyZWVuSCAtIHRoaXMuaW1hZ2VIKSB7XG4gICAgICAgICAgdGhpcy5pbWFnZVkgPSB0aGlzLnNjcmVlbkggLSB0aGlzLmltYWdlSDtcbiAgICAgICAgICBzZXROZXh0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh5MiA+IDApIHtcbiAgICAgICAgICBpZiAodGhpcy5fY2hlY2tPdmVybGFwcGluZygpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVkgPiB0aGlzLmltYWdlSCkge1xuICAgICAgICAgICAgICB0aGlzLkhUTUxlbGVtZW50ID0gdGhpcy5fY2hlY2tPdmVybGFwcGluZygpO1xuICAgICAgICAgICAgICB0aGlzLmltYWdlWSA9IE1hdGguY2VpbCh0aGlzLkhUTUxlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCkgLSB0aGlzLmltYWdlSDtcbiAgICAgICAgICAgICAgc2V0TmV4dCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuSFRNTGVsZW1lbnQpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2NoZWNrT3ZlcmxhcHBpbmcoKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VZICsgdGhpcy5pbWFnZUggPiB0aGlzLkhUTUxlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIDMgfHwgdGhpcy5pbWFnZVkgKyB0aGlzLmltYWdlSCA8IHRoaXMuSFRNTGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gMykge1xuICAgICAgICAgICAgICB0aGlzLkhUTUxlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbWFnZVggPCB0aGlzLkhUTUxlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbWFnZVggPSBwYXJzZUludCh0aGlzLmltYWdlWCArIDMpO1xuICAgICAgICAgICAgICBzZXROZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuaW1hZ2VYID0gcGFyc2VJbnQodGhpcy5pbWFnZVggLSAzKTtcbiAgICAgICAgICAgICAgc2V0TmV4dCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLkRPTWRpdi5zdHlsZS5sZWZ0ID0gcGFyc2VJbnQodGhpcy5pbWFnZVgpICsgXCJweFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0TmV4dCkge1xuICAgICAgICAgIGlmICghdGhpcy5fZ2V0TmV4dFJhbmRvbU5vZGUoYm9yZGVyWzBdKSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXNldE5leHQgJiYgZ3Jhdml0eSAmJiBncmF2aXR5WzBdICYmIGdyYXZpdHlbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ25leHQnKSkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZVkgPCB0aGlzLnNjcmVlbkggLSB0aGlzLmltYWdlSCAtIDIpIHtcbiAgICAgICAgICBpZiAodGhpcy5IVE1MZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBzZXROZXh0ID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGVja092ZXJsYXBwaW5nKCkpIHtcbiAgICAgICAgICAgICAgc2V0TmV4dCA9IHRydWU7XG4gICAgICAgICAgICAgIHRoaXMuSFRNTGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZXROZXh0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2dldE5leHRSYW5kb21Ob2RlKGdyYXZpdHlbMF0pKSByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXNldE5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2VYIDwgLXRoaXMuaW1hZ2VXICYmIHgyIDwgMCB8fCB0aGlzLmltYWdlWCA+IHRoaXMuc2NyZWVuVyAmJiB4MiA+IDAgfHwgdGhpcy5pbWFnZVkgPCAtdGhpcy5pbWFnZUggJiYgeTEgPCAwIHx8IHRoaXMuaW1hZ2VZID4gdGhpcy5zY3JlZW5IICYmIHkyID4gMCkge1xuICAgICAgICAgIHNldE5leHQgPSB0cnVlO1xuICAgICAgICAgIGlmICghdGhpcy5pc0NoaWxkKSB0aGlzLl9zcGF3bkVTaGVlcCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX25leHRFU2hlZXBTdGVwKCk7XG4gICAgICB9LmJpbmQodGhpcyksIHBhcnNlSW50KGRlbDEpICsgcGFyc2VJbnQoKGRlbDIgLSBkZWwxKSAqIHRoaXMuYW5pbWF0aW9uU3RlcCAvIHN0ZXBzKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIGVTaGVlcDtcbn0oKTtcblxuOyJdfQ==
